<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
	<link rel="stylesheet" href="css/main.css">
</head>

<body>
	<!-- start header -->
	<div class="container-fluid">
		<header class="row shadow-sm flex-nowrap justify-content-center align-items-center header">

			<div class="col-2 header__logo align-self-center">
				<a href="index.html"><img src="img/logo.png" alt=""></a>
			</div>

			<div class=" col-5 header__title align-self-center">
				РЕМОНТ СВАРОЧНОГО ОБОРУДОВАНИЯ
			</div>

			<div class="col-3 flex-column header__contact-information ">

				<div class="row header__contact-information__level-1">

					<div class="col-1 header__contact-information__level-1__img ">
						<img src="img/tel-rouge.png" alt="">
					</div>

					<div class="col header__contact-information__level-1__phone-num">
						<a href="tel:+7(343) 304-64-50"><b>(343)304-64-50</b></a>
					</div>

				</div>

				<div class="col header__contact-information__level-2">
					<p>прием звонков: пн-пт с 9:00 до 18:00</p>
				</div>

			</div>

			<div class="col-2 header__call-button ">
				<input class="btn btn-outline-danger" type="button" value="Заказать звонок">
			</div>

		</header>

		<nav class="menu">
			<ul class="menu_item">
				<li class="menu__item__items ">
					<a class="btn btn-light" href="diagnostika.html">Диагностика</a>
				</li>
				<li class="menu__item__items">
					<a class="btn btn-light" href="remont.html">Ремонт</a>
				</li>
				<li class="menu__item__items">
					<a class="btn btn-light" href="dostavka.html">Доставка</a>
				</li>
				<li class="menu__item__items">
					<a class="btn btn-light" href="price.html">цены</a>
				</li>
				<li class="menu__item__items">
					<a class="btn btn-light" href="kontakts.html">Контакты</a>
				</li>
			</ul>
		</nav>
	</div>
	<!-- end hedaer -->

	<section class="content">
		<div class="content__description container">
			<div class="content__description__title">
				<h1>Контакты</h1>
			</div>

			<div class="content__description__text">
				ООО «Шторм»<br>
				<b>Адрес:</b> <br>
				Свердловская область, г. Верхняя Пышма ул. Бажова, 28<br>
				<b>E-mail:</b><br>
				service@shtorm-its.ru<br>
				<b>Телефон:</b><br>
				+7 (343) 304-64-50<br>
				<b>Режим работы:</b><br>
				Пн. – Пт.: с 9:00 до 18:00<br> </div>
		</div>

		<div class="mapTab-wrapper d-flex flex-column flex-sm-column flex-md-row justify-content-center mx-auto">
			<div class=" mapTab-list col-12 col-sm-12 col-md-3 h-md-100">
				<div class="mapTab-list__item" id="tabLat56.829588173462Lon60.639668419643" data-lon="60.639668419643" data-lat="56.829588173462">
					Екатеринбург<br>
					ул. Народной воли, 115<br>
					+7 (343) 304-64-50<br>
					ekb@shtorm-its.ru<br>
					Пн. - Пт.: с 9:00 до 18:00
				</div>
				
				<!-- <?foreach($place['PLACEMARKS'] as $placemark){
					// dd($placemark);
				?>
					<div id="tabLat<?=$placemark["LAT"]?>Lon<?=$placemark["LON"]?>" data-lat="<?=$placemark["LAT"]?>" data-lon="<?=$placemark["LON"]?>" class="mapTab-item">
					<?if(strpos($placemark["TEXT"], 'катеринбург') <= 0):?>
						
					<?endif;?>
					<?=strtr($placemark["TEXT"], array('('=>'+7 ('));?><?if((strpos($placemark["TEXT"], 'катеринбург') <= 0 && strpos($placemark["TEXT"], '123') <= 0)):?><?endif;?>
					<?if(strpos($placemark["TEXT"], 'катеринбург') <= 0):?><?endif;?>
					</div>
				<?
				}
				?> -->
			</div>
			<div class=" bx-yandex-view-map col-12 col-sm-12 col-md-6 ">
				<div class="justify-content-center" id="YMAP_MAP_mF8Ev4" class="bx-yandex-map" style="height: 500px;">
					Wait...
				</div>
			</div>
		</div>
	</section>

	<script src="https://api-maps.yandex.ru/2.0/?load=package.full&mode=release&lang=ru-RU&wizard=bitrix"
		type="text/javascript"></script>

	<script type="text/javascript">
		if (!window.GLOBAL_arMapObjects)
			window.GLOBAL_arMapObjects = {};

		function init_MAP_mF8Ev4() {
			if (!window.ymaps)
				return;

			if (typeof window.GLOBAL_arMapObjects['MAP_mF8Ev4'] !== "undefined")
				return;

			var node = document.getElementById("YMAP_MAP_mF8Ev4");
			node.innerHTML = '';

			window.tabedmap = window.GLOBAL_arMapObjects['MAP_mF8Ev4'] = new ymaps.Map(node, {
				center: [56.337097959314, 43.866852915344],
				zoom: 13,
				type: 'yandex#map'
			});

			window.tabedmap.behaviors.enable("scrollZoom");
			window.tabedmap.behaviors.enable("dblClickZoom");
			window.tabedmap.behaviors.enable("drag");
			if (window.tabedmap.behaviors.isEnabled("rightMouseButtonMagnifier"))
				window.tabedmap.behaviors.disable("rightMouseButtonMagnifier");
			window.tabedmap.controls.add('zoomControl');
			window.tabedmap.controls.add('miniMap');
			window.tabedmap.controls.add('typeSelector');
			window.tabedmap.controls.add('scaleLine');
			if (window.SetPlacemarks_1) {
				window.SetPlacemarks_1(window.tabedmap);
			}
		}

		(function ymaps_waiter() {
			if (typeof ymaps !== 'undefined')
				ymaps.ready(init_MAP_mF8Ev4);
			else
				setTimeout(ymaps_waiter, 100);
		})();


		/* if map inits in hidden block (display:none)
		 *  after the block showed
		 *  for properly showing map this function must be called
		 */
		function MapYandexAfterShow(mapId) {
			if (window.GLOBAL_arMapObjects[mapId] !== undefined)
				window.GLOBAL_arMapObjects[mapId].container.fitToViewport();
		}




		if (!window.YMapAddPlacemark) {
			window.YMapAddPlacemark = function (map, arPlacemark) {
				// if (null == map)
				// 	return false;

				if (!arPlacemark.LAT || !arPlacemark.LON)
					return false;
				// console.log(arPlacemark);
				var props = {};
				if (null != arPlacemark.TEXT && arPlacemark.TEXT.length > 0) {
					var value_view = '';

					if (arPlacemark.TEXT.length > 0) {
						var rnpos = arPlacemark.TEXT.indexOf("\n");
						value_view = rnpos <= 0 ? arPlacemark.TEXT : arPlacemark.TEXT.substring(0, rnpos);
					}

					props.balloonContent = arPlacemark.TEXT.replace(/\n/g, '<br />');
					props.hintContent = value_view;
				}

				var obPlacemark = new ymaps.Placemark(
					[arPlacemark.LAT, arPlacemark.LON],
					props, {
						balloonCloseButton: true
					}
				);
				obPlacemark.events.add("balloonopen", function (event) {
					// 		console.log(arPlacemark);
					activateBalloon([arPlacemark.LAT, arPlacemark.LON], {
						content: arPlacemark.TEXT
					});
				});

				map.geoObjects.add(obPlacemark);

				return obPlacemark;
			}
		}

		function SetPlacemarks_1(tabedmap) {
			if (typeof window["YMapAddPlacemark"] != 'function') {
				/* If component's result was cached as html,
				 * script.js will not been loaded next time.
				 * let's do it manualy.
				 */

				(function (d, s, id) {
					var js, bx_ym = d.getElementsByTagName(s)[0];
					if (d.getElementById(id)) return;
					js = d.createElement(s);
					js.id = id;
					js.src = "<?=get_template_directory().'/js/map.script.js'?>";
					bx_ym.parentNode.insertBefore(js, bx_ym);
				}(document, 'script', 'ya-map-js'));

				var ymWaitIntervalId = setInterval(function () {
					if (typeof window["YMapAddPlacemark"] == 'function') {
						SetPlacemarks_1(tabedmap);
						clearInterval(ymWaitIntervalId);
					}
				}, 300);

				return;
			}

			var arObjects = {
				PLACEMARKS: [],
				POLYLINES: []
			};
			// <?
			// 	if (is_array($place['PLACEMARKS']) && ($cnt = count($place['PLACEMARKS']))):
			// 		for($i = 0; $i < $cnt; $i++):
			// ?>
			// 			arObjects.PLACEMARKS[arObjects.PLACEMARKS.length] = YMapAddPlacemark(tabedmap, <?=json_encode($place['PLACEMARKS'][$i])?>);
			// <?
			// 		endfor;
			// 	endif;
			// ?>
			console.log(arObjects);

			$('.mapTab-list__item').click(function () {
				var text = $(this).html();
				console.log(text);
				var lat = $(this).data('lat');
				var lon = $(this).data('lon');
				activateBalloon([lat, lon], {
					content: text
				}, {
					closeButton: true
				});
			});
			window.activateBalloon = function (coords, props, options) {

				$('.mapTab-list__item').removeClass('active');
				if (!options) {
					options = {
						closeButton: true
					};
				}
				window.activeBalloon = tabedmap.balloon.open(coords, props, options);
				window.activeBalloon.events.add('close', function () {

					$('.mapTab-list__item').removeClass('active');
				});
				tabedmap.setCenter(coords);
				document.getElementById('tabLat' + coords[0] + 'Lon' + coords[1]).classList.add('active');
			}
		}
	</script>
	<!-- START FOOTER -->
	<footer class="footer d-flex justify-content-around">
		<div class="col-4 footer__form-callback  flex-column ">
			<div class="footer__form-callback__title ">Остались вопросы?</div>
			<form action="">
				<div>
					Ваше имя:*<br>
					<input class="form-control" type="text" name="" id="">
				</div>
				<div>
					Мобильный телефон:*<br>
					<input class="form-control" type="text" name="" id="">
				</div>
				<div>
					Коментарий:<br>
					<textarea class="form-control" rows="5" name="" id="" cols="30" rows="10"></textarea>
				</div>
				<div>
					<input class="btn btn-outline-danger" type="submit" name="" id="" value="Отправить">
				</div>
			</form>
		</div>
		<div class="col-5 align-self-center footer__text">
			Мы найдем для вас лучшие варианты поддержки. Свяжитесь с экспертом по телефону, по электронной почте или
			другим способом.
		</div>
	</footer>
	<!-- END FOOTER -->
</body>

</html>